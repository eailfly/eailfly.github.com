<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Hello, World!</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2018-07-18T14:58:27+08:00</updated><entry><title>在 OSX 中使用 locate 命令</title><link href="/zai-osx-zhong-shi-yong-locate-ming-ling.html" rel="alternate"></link><published>2018-07-18T14:58:27+08:00</published><updated>2018-07-18T14:58:27+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2018-07-18:/zai-osx-zhong-shi-yong-locate-ming-ling.html</id><summary type="html">&lt;p&gt;从 OS X Lion 开始 OS X 系统内置了 &lt;code&gt;locate&lt;/code&gt; 命令，如果没有启用的话在第一次执行 &lt;code&gt;locate&lt;/code&gt; 时系统会提示如何启用：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $ locate python

  WARNING: The locate database &lt;span class="o"&gt;(&lt;/span&gt;/var/db/locate.database&lt;span class="o"&gt;)&lt;/span&gt; does not exist.
  To create the database, run the following command:

  sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist

  Please be aware that the …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;从 OS X Lion 开始 OS X 系统内置了 &lt;code&gt;locate&lt;/code&gt; 命令，如果没有启用的话在第一次执行 &lt;code&gt;locate&lt;/code&gt; 时系统会提示如何启用：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $ locate python

  WARNING: The locate database &lt;span class="o"&gt;(&lt;/span&gt;/var/db/locate.database&lt;span class="o"&gt;)&lt;/span&gt; does not exist.
  To create the database, run the following command:

  sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist

  Please be aware that the database can take some &lt;span class="nb"&gt;time&lt;/span&gt; to generate&lt;span class="p"&gt;;&lt;/span&gt; once
  the database has been created, this message will no longer appear.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;即可启用&lt;/p&gt;
&lt;p&gt;如果需要执行 &lt;code&gt;updatedb&lt;/code&gt;，需执行 &lt;code&gt;sudo /usr/libexec/locate.updatedb&lt;/code&gt;，或创建符号链接&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  ln -s /usr/local/bin/updatedb /usr/libexec/locate.updatedb
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>kubeadm 部署 kubernetes 集群</title><link href="/kubeadm-bu-shu-kubernetes-ji-qun.html" rel="alternate"></link><published>2017-10-20T14:22:06+08:00</published><updated>2017-10-20T14:22:06+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2017-10-20:/kubeadm-bu-shu-kubernetes-ji-qun.html</id><summary type="html">&lt;p&gt;本文使用代理的方式来部署集群。&lt;/p&gt;
&lt;h1&gt;服务器信息&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;master: 192.168.25.148&lt;/li&gt;
&lt;li&gt;node: 192.168.25.149&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;master + node&lt;/h1&gt;
&lt;p&gt;前期准备&lt;/p&gt;
&lt;h3&gt;配置 hostname&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hostnamectl --static set-hostname master
hostname master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;编辑 &lt;code&gt;/etc/hosts&lt;/code&gt;, 添加一下内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;192&lt;/span&gt;.168.25.148 master
&lt;span class="m"&gt;192&lt;/span&gt;.168.25.149 node
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置防火墙&lt;/h3&gt;
&lt;p&gt;关闭防火墙。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl disable firewalld
systemctl stop firewalld
iptables -F
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置 selinux&lt;/h3&gt;
&lt;p&gt;关闭 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;本文使用代理的方式来部署集群。&lt;/p&gt;
&lt;h1&gt;服务器信息&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;master: 192.168.25.148&lt;/li&gt;
&lt;li&gt;node: 192.168.25.149&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;master + node&lt;/h1&gt;
&lt;p&gt;前期准备&lt;/p&gt;
&lt;h3&gt;配置 hostname&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hostnamectl --static set-hostname master
hostname master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;编辑 &lt;code&gt;/etc/hosts&lt;/code&gt;, 添加一下内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;192&lt;/span&gt;.168.25.148 master
&lt;span class="m"&gt;192&lt;/span&gt;.168.25.149 node
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置防火墙&lt;/h3&gt;
&lt;p&gt;关闭防火墙。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl disable firewalld
systemctl stop firewalld
iptables -F
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置 selinux&lt;/h3&gt;
&lt;p&gt;关闭 SELinux&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;setenforce &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;编辑 &lt;code&gt;/etc/selinux/conf&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 将以下内容&lt;/span&gt;
&lt;span class="nv"&gt;SELINUX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;enforcing
&lt;span class="c1"&gt;# 替换为以下内容&lt;/span&gt;
&lt;span class="nv"&gt;SELINUX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;disabled
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;关闭 swap&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;swapoff -a
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改 &lt;code&gt;/etc/fstab&lt;/code&gt; ，注释掉 swap 的自动挂载。&lt;/p&gt;
&lt;h3&gt;配置系统&lt;/h3&gt;
&lt;p&gt;创建 &lt;code&gt;/etc/sysctl.d/k8s.conf&lt;/code&gt; ，添加如下内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;net.bridge.bridge-nf-call-ip6tables &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
net.bridge.bridge-nf-call-iptables &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
vm.swappiness &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;执行修改&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;modprobe br_netfilter
sysctl -p /etc/sysctl.d/k8s.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;sysctl -p /etc/sysctl.d/k8s.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装 Docker&lt;/p&gt;
&lt;h3&gt;安装依赖和工具&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum install -y yum-utils &lt;span class="se"&gt;\&lt;/span&gt;
     device-mapper-persistent-data &lt;span class="se"&gt;\&lt;/span&gt;
     lvm2
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;添加官方源&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum-config-manager &lt;span class="se"&gt;\&lt;/span&gt;
     --add-repo &lt;span class="se"&gt;\&lt;/span&gt;
     https://download.docker.com/linux/centos/docker-ce.repo
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装 Docker CE&lt;/h3&gt;
&lt;p&gt;Kubernetes 1.8 已经针对 Docker 的 1.11.2, 1.12.6, 1.13.1 和 17.03.2
等版本做了验证。 因为我们这里在各节点安装 docker 的 17.03.2 版本。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum install -y --setopt&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;obsoletes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    docker-ce-17.03.2.ce-1.el7.centos &lt;span class="se"&gt;\&lt;/span&gt;
    docker-ce-selinux-17.03.2.ce-1.el7.centos
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置防火墙&lt;/h3&gt;
&lt;p&gt;Docker 从 1.13 版本开始调整了默认的防火墙规则，禁用了 iptables filter
表中 FOWARD 链，这样会引起 Kubernetes 集群中跨 Node 的 Pod
无法通信，在各个 Docker 节点执行下面的命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;iptables -P FORWARD ACCEPT
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可在 docker 的 systemd unit 文件中以 ExecStartPost 加入上面的命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ExecStartPost=/usr/sbin/iptables -P FORWARD ACCEPT
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;配置 Docker 代理&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p /etc/systemd/system/docker.service.d/
$ vi /etc/systemd/system/docker.service.d/http-proxy.conf
&lt;span class="o"&gt;[&lt;/span&gt;Service&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;HTTP_PROXY=http://192.168.25.147:8118/&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HTTPS_PROXY=http://192.168.25.147:8118/&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;NO_PROXY=localhost,127.0.0.1,10.0.0.0/8,192.168.25.148,192.168.25.149&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;启动 Docker&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; docker
systemctl start docker
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;配置翻墙&lt;/p&gt;
&lt;p&gt;略&lt;/p&gt;
&lt;p&gt;安装 kubelet、kubectl 和 kubeadm&lt;/p&gt;
&lt;p&gt;这两个包所有机器都需要安装。&lt;/p&gt;
&lt;h3&gt;配置 kubernetes 源&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF &amp;gt; /etc/yum.repos.d/kubernetes.repo&lt;/span&gt;
&lt;span class="s"&gt;[kubernetes]&lt;/span&gt;
&lt;span class="s"&gt;name=Kubernetes&lt;/span&gt;
&lt;span class="s"&gt;baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64&lt;/span&gt;
&lt;span class="s"&gt;enabled=1&lt;/span&gt;
&lt;span class="s"&gt;gpgcheck=1&lt;/span&gt;
&lt;span class="s"&gt;repo_gpgcheck=1&lt;/span&gt;
&lt;span class="s"&gt;gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg&lt;/span&gt;
&lt;span class="s"&gt;        https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg&lt;/span&gt;
&lt;span class="s"&gt;EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;YUM 配置代理及缓存&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vi /etc/yum.conf
...
&lt;span class="nv"&gt;proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;socks5://127.0.0.1:1080
...
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装包&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum install -y kubelet kubeadm kubectl
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;更改 cgroup 驱动方式&lt;/h3&gt;
&lt;p&gt;docker 和 kubelet 的 cgroup 驱动方式可能不同，需要进行修复
编辑此文件，更改下面一行 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;exec-opts&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;native.cgroupdriver=systemd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;重启 docker&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl restart docker
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;启动服务&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; kubelet
systemctl start kubelet
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;master&lt;/h1&gt;
&lt;p&gt;初始化集群&lt;/p&gt;
&lt;h3&gt;配置代理&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;NO_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;localhost,127.0.0.1,10.0.0.0/8,192.168.25.148&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;https_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://127.0.0.1:8118/
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;http_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://127.0.0.1:8118/
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;初始化&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;注意，输出的最后一行请记下，一会添加 node 的时候要用&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ kubeadm init --kubernetes-version&lt;span class="o"&gt;=&lt;/span&gt;v1.8.1 --pod-network-cidr&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.244.0.0/16 --token-ttl &lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeadm&lt;span class="o"&gt;]&lt;/span&gt; WARNING: kubeadm is in beta, please &lt;span class="k"&gt;do&lt;/span&gt; not use it &lt;span class="k"&gt;for&lt;/span&gt; production clusters.
&lt;span class="o"&gt;[&lt;/span&gt;init&lt;span class="o"&gt;]&lt;/span&gt; Using Kubernetes version: v1.8.1
&lt;span class="o"&gt;[&lt;/span&gt;init&lt;span class="o"&gt;]&lt;/span&gt; Using Authorization modes: &lt;span class="o"&gt;[&lt;/span&gt;Node RBAC&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeadm&lt;span class="o"&gt;]&lt;/span&gt; WARNING: starting in &lt;span class="m"&gt;1&lt;/span&gt;.8, tokens expire after &lt;span class="m"&gt;24&lt;/span&gt; hours by default &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; you require a non-expiring token use --token-ttl &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated CA certificate and key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated API server certificate and key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; API Server serving cert is signed &lt;span class="k"&gt;for&lt;/span&gt; DNS names &lt;span class="o"&gt;[&lt;/span&gt;k8s kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local&lt;span class="o"&gt;]&lt;/span&gt; and IPs &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.96.0.1 &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated API server kubelet client certificate and key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated service account token signing key and public key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated front-proxy CA certificate and key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Generated front-proxy client certificate and key.
&lt;span class="o"&gt;[&lt;/span&gt;certificates&lt;span class="o"&gt;]&lt;/span&gt; Valid certificates and keys now exist in &lt;span class="s2"&gt;&amp;quot;/etc/kubernetes/pki&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeconfig&lt;span class="o"&gt;]&lt;/span&gt; Wrote KubeConfig file to disk: &lt;span class="s2"&gt;&amp;quot;/etc/kubernetes/scheduler.conf&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeconfig&lt;span class="o"&gt;]&lt;/span&gt; Wrote KubeConfig file to disk: &lt;span class="s2"&gt;&amp;quot;/etc/kubernetes/admin.conf&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeconfig&lt;span class="o"&gt;]&lt;/span&gt; Wrote KubeConfig file to disk: &lt;span class="s2"&gt;&amp;quot;/etc/kubernetes/kubelet.conf&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;kubeconfig&lt;span class="o"&gt;]&lt;/span&gt; Wrote KubeConfig file to disk: &lt;span class="s2"&gt;&amp;quot;/etc/kubernetes/controller-manager.conf&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;apiclient&lt;span class="o"&gt;]&lt;/span&gt; Created API client, waiting &lt;span class="k"&gt;for&lt;/span&gt; the control plane to become ready
&amp;lt;-&amp;gt; 这里会停的比较久，要去下载镜像，然后还得启动容器
&lt;span class="o"&gt;[&lt;/span&gt;apiclient&lt;span class="o"&gt;]&lt;/span&gt; All control plane components are healthy after &lt;span class="m"&gt;293&lt;/span&gt;.004469 seconds
&lt;span class="o"&gt;[&lt;/span&gt;token&lt;span class="o"&gt;]&lt;/span&gt; Using token: 2af779.b803df0b1effb3d9
&lt;span class="o"&gt;[&lt;/span&gt;apiconfig&lt;span class="o"&gt;]&lt;/span&gt; Created RBAC rules
&lt;span class="o"&gt;[&lt;/span&gt;addons&lt;span class="o"&gt;]&lt;/span&gt; Applied essential addon: kube-proxy
&lt;span class="o"&gt;[&lt;/span&gt;addons&lt;span class="o"&gt;]&lt;/span&gt; Applied essential addon: kube-dns

Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run &lt;span class="o"&gt;(&lt;/span&gt;as a regular user&lt;span class="o"&gt;)&lt;/span&gt;:

mkdir -p &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube
sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube/config
sudo chown &lt;span class="k"&gt;$(&lt;/span&gt;id -u&lt;span class="k"&gt;)&lt;/span&gt;:&lt;span class="k"&gt;$(&lt;/span&gt;id -g&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube/config

You should now deploy a pod network to the cluster.
Run &lt;span class="s2"&gt;&amp;quot;kubectl apply -f [podnetwork].yaml&amp;quot;&lt;/span&gt; with one of the options listed at:
http://kubernetes.io/docs/admin/addons/

You can now join any number of machines by running the following on each node
as root:

kubeadm join --token 2af779.b803df0b1effb3d9 &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148:6443
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;监控安装情况命令有：docker ps, docker images, journalctl -xeu kubelet
(/var/log/messages) 。
如果有镜像下载和容器新增，说明安装过程在进行中。否则得检查下你的代理是否正常工作了！&lt;/p&gt;
&lt;h3&gt;配置 kubectl&lt;/h3&gt;
&lt;p&gt;按照初始化时候的输出说明，以普通用户执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir -p &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube
sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube/config
sudo chown &lt;span class="k"&gt;$(&lt;/span&gt;id -u&lt;span class="k"&gt;)&lt;/span&gt;:&lt;span class="k"&gt;$(&lt;/span&gt;id -g&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.kube/config
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装 flannel&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;可选：master 参与运算&lt;/p&gt;
&lt;p&gt;默认情况下 master 服务器是不参与运算的，pods 不会在 master
上运行，如果需要 pods 在 master 上运行，可执行一下命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ kubectl taint nodes --all node-role.kubernetes.io/master-
node &lt;span class="s2"&gt;&amp;quot;master&amp;quot;&lt;/span&gt; untainted
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装 dashboard&lt;/p&gt;
&lt;p&gt;官方推荐的安装 dashboard 的方法如下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;kubernetes-dashboard.yaml 文件中的 ServiceAccount kubernetes-dashboard
只有相对较小的权限，因此我们创建一个 kubernetes-dashboard-admin 的
ServiceAccount 并授予集群 admin 的权限，创建
kubernetes-dashboard-admin.rbac.yaml：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;v1&lt;/span&gt;
&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ServiceAccount&lt;/span&gt;
&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;k8s-app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kubernetes-dashboard&lt;/span&gt;
  &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kubernetes-dashboard-admin&lt;/span&gt;
  &lt;span class="nt"&gt;namespace&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kube-system&lt;/span&gt;

&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;rbac.authorization.k8s.io/v1beta1&lt;/span&gt;
&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ClusterRoleBinding&lt;/span&gt;
&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kubernetes-dashboard-admin&lt;/span&gt;
  &lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;k8s-app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kubernetes-dashboard&lt;/span&gt;
&lt;span class="nt"&gt;roleRef&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;apiGroup&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;rbac.authorization.k8s.io&lt;/span&gt;
  &lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ClusterRole&lt;/span&gt;
  &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cluster-admin&lt;/span&gt;
&lt;span class="nt"&gt;subjects&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ServiceAccount&lt;/span&gt;
  &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kubernetes-dashboard-admin&lt;/span&gt;
  &lt;span class="nt"&gt;namespace&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;kube-system&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl create -f kubernetes-dashboard-admin.rbac.yaml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查看 kubernete-dashboard-admin 的 token:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl -n kube-system get secret &lt;span class="p"&gt;|&lt;/span&gt; grep kubernetes-dashboard-admin
kubernetes-dashboard-admin-token-pfss5   kubernetes.io/service-account-token   &lt;span class="m"&gt;3&lt;/span&gt;         14s

 kubectl describe -n kube-system secret/kubernetes-dashboard-admin-token-pfss5
Name:         kubernetes-dashboard-admin-token-pfss5
Namespace:    kube-system
Labels:       &amp;lt;none&amp;gt;
Annotations:  kubernetes.io/service-account.name&lt;span class="o"&gt;=&lt;/span&gt;kubernetes-dashboard-admin
              kubernetes.io/service-account.uid&lt;span class="o"&gt;=&lt;/span&gt;1029250a-ad76-11e7-9a1d-08002778b8a1

Type:  kubernetes.io/service-account-token

&lt;span class="nv"&gt;Data&lt;/span&gt;
&lt;span class="o"&gt;====&lt;/span&gt;
ca.crt:     &lt;span class="m"&gt;1025&lt;/span&gt; bytes
namespace:  &lt;span class="m"&gt;11&lt;/span&gt; bytes
token:      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJrdWJlcm5ldGVzLWRhc2hib2FyZC1hZG1pbi10b2tlbi1wZnNzNSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJrdWJlcm5ldGVzLWRhc2hib2FyZC1hZG1pbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjEwMjkyNTBhLWFkNzYtMTFlNy05YTFkLTA4MDAyNzc4YjhhMSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTprdWJlcm5ldGVzLWRhc2hib2FyZC1hZG1pbiJ9.Bs6h65aFCFkEKBO_h4muoIK3XdTcfik-pNM351VogBJD_pk5grM1PEWdsCXpR45r8zUOTpGM-h8kDwgOXwy2i8a5RjbUTzD3OQbPJXqa1wBk0ABkmqTuw-3PWMRg_Du8zuFEPdKDFQyWxiYhUi_v638G-R5RdZD_xeJAXmKyPkB3VsqWVegoIVTaNboYkw6cgvMa-4b7IjoN9T1fFlWCTZI8BFXbM8ICOoYMsOIJr3tVFf7d6oVNGYqaCk42QL_2TfB6xMKLYER9XDh753-_FDVE5ENtY5YagD3T_s44o0Ewara4P9C3hYRKdJNLxv7qDbwPl3bVFH3HXbsSxxF3TQ
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查看安装状态&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods --all-namespaces
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装 Heapster&lt;/p&gt;
&lt;p&gt;pods、镜像、容器列表&lt;/p&gt;
&lt;h3&gt;pods 列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ kubectl get pods --all-namespaces -o wide
NAMESPACE     NAME                                    READY     STATUS    RESTARTS   AGE       IP               NODE
kube-system   etcd-master                             &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kube-apiserver-master                   &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kube-controller-manager-master          &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kube-dns-2425271678-t88zz               &lt;span class="m"&gt;3&lt;/span&gt;/3       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;10&lt;/span&gt;.244.0.2       master
kube-system   kube-flannel-ds-1kc48                   &lt;span class="m"&gt;2&lt;/span&gt;/2       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kube-proxy-kc2bf                        &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kube-scheduler-master                   &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          23h       &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148   master
kube-system   kubernetes-dashboard-3313488171-x9rj7   &lt;span class="m"&gt;1&lt;/span&gt;/1       Running   &lt;span class="m"&gt;0&lt;/span&gt;          1h        &lt;span class="m"&gt;10&lt;/span&gt;.244.2.7       master
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;镜像列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker images
REPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE
gcr.io/google_containers/kube-controller-manager-amd64   v1.7.6              028bd65dc783        &lt;span class="m"&gt;2&lt;/span&gt; days ago          138MB
gcr.io/google_containers/kube-scheduler-amd64            v1.7.6              c3101592d24c        &lt;span class="m"&gt;2&lt;/span&gt; days ago          &lt;span class="m"&gt;77&lt;/span&gt;.2MB
gcr.io/google_containers/kube-apiserver-amd64            v1.7.6              f15a956e781d        &lt;span class="m"&gt;2&lt;/span&gt; days ago          186MB
gcr.io/google_containers/kube-proxy-amd64                v1.7.6              af674cbf7039        &lt;span class="m"&gt;2&lt;/span&gt; days ago          115MB
gcr.io/google_containers/kubernetes-dashboard-amd64      v1.6.3              691a82db1ecd        &lt;span class="m"&gt;7&lt;/span&gt; weeks ago         139MB
quay.io/coreos/flannel                                   v0.8.0-amd64        9db3bab8c19e        &lt;span class="m"&gt;2&lt;/span&gt; months ago        &lt;span class="m"&gt;50&lt;/span&gt;.7MB
gcr.io/google_containers/k8s-dns-sidecar-amd64           &lt;span class="m"&gt;1&lt;/span&gt;.14.4              38bac66034a6        &lt;span class="m"&gt;2&lt;/span&gt; months ago        &lt;span class="m"&gt;41&lt;/span&gt;.8MB
gcr.io/google_containers/k8s-dns-kube-dns-amd64          &lt;span class="m"&gt;1&lt;/span&gt;.14.4              a8e00546bcf3        &lt;span class="m"&gt;2&lt;/span&gt; months ago        &lt;span class="m"&gt;49&lt;/span&gt;.4MB
gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64     &lt;span class="m"&gt;1&lt;/span&gt;.14.4              f7f45b9cb733        &lt;span class="m"&gt;2&lt;/span&gt; months ago        &lt;span class="m"&gt;41&lt;/span&gt;.4MB
gcr.io/google_containers/etcd-amd64                      &lt;span class="m"&gt;3&lt;/span&gt;.0.17              243830dae7dd        &lt;span class="m"&gt;6&lt;/span&gt; months ago        169MB
gcr.io/google_containers/kube-controller-manager-amd64   v1.5.1              cd5684031720        &lt;span class="m"&gt;9&lt;/span&gt; months ago        102MB
gcr.io/google_containers/pause-amd64                     &lt;span class="m"&gt;3&lt;/span&gt;.0                 99e59f495ffa        &lt;span class="m"&gt;16&lt;/span&gt; months ago       747kB
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;容器列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker ps
CONTAINER ID        IMAGE                                                    COMMAND                  CREATED             STATUS              PORTS               NAMES
a4d8b0bf22d3        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;2&lt;/span&gt; hours ago         Up &lt;span class="m"&gt;2&lt;/span&gt; hours                              k8s_POD_webserver-1536865423-8hl0k_default_641b74c8-9adb-11e7-9155-0800277a98f8_0
b68479595f3e        gcr.io/google_containers/k8s-dns-sidecar-amd64           &lt;span class="s2"&gt;&amp;quot;/sidecar --v=2 --...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_sidecar_kube-dns-2425271678-t88zz_kube-system_b024d020-9a25-11e7-9155-0800277a98f8_0
36229b640403        gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64     &lt;span class="s2"&gt;&amp;quot;/dnsmasq-nanny -v...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_dnsmasq_kube-dns-2425271678-t88zz_kube-system_b024d020-9a25-11e7-9155-0800277a98f8_0
3477ef11db9b        gcr.io/google_containers/k8s-dns-kube-dns-amd64          &lt;span class="s2"&gt;&amp;quot;/kube-dns --domai...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kubedns_kube-dns-2425271678-t88zz_kube-system_b024d020-9a25-11e7-9155-0800277a98f8_0
0f12257309a0        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-dns-2425271678-t88zz_kube-system_b024d020-9a25-11e7-9155-0800277a98f8_0
0b25355d63ae        quay.io/coreos/flannel                                   &lt;span class="s2"&gt;&amp;quot;/opt/bin/flanneld...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kube-flannel_kube-flannel-ds-1kc48_kube-system_000e10bb-9a26-11e7-9155-0800277a98f8_0
86afd9070a0b        quay.io/coreos/flannel                                   &lt;span class="s2"&gt;&amp;quot;/bin/sh -c &amp;#39;set -...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_install-cni_kube-flannel-ds-1kc48_kube-system_000e10bb-9a26-11e7-9155-0800277a98f8_0
24c225bb39b3        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-flannel-ds-1kc48_kube-system_000e10bb-9a26-11e7-9155-0800277a98f8_0
2891cc49e1c0        gcr.io/google_containers/kube-proxy-amd64                &lt;span class="s2"&gt;&amp;quot;/usr/local/bin/ku...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kube-proxy_kube-proxy-kc2bf_kube-system_b020a533-9a25-11e7-9155-0800277a98f8_0
cbfdb21bc55d        gcr.io/google_containers/kube-scheduler-amd64            &lt;span class="s2"&gt;&amp;quot;kube-scheduler --...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kube-scheduler_kube-scheduler-k8s_kube-system_2b08b8f69c973df2fbf99ddef86b56ef_0
65072be8dc4f        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-proxy-kc2bf_kube-system_b020a533-9a25-11e7-9155-0800277a98f8_0
82cd164def30        gcr.io/google_containers/kube-controller-manager-amd64   &lt;span class="s2"&gt;&amp;quot;kube-controller-m...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kube-controller-manager_kube-controller-manager-k8s_kube-system_c0244259dda50419552580ddd0c049f3_0
d840219ca5bb        gcr.io/google_containers/kube-apiserver-amd64            &lt;span class="s2"&gt;&amp;quot;kube-apiserver --...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_kube-apiserver_kube-apiserver-k8s_kube-system_f3d9d19161b9f95170a67c2834ba1c8b_0
3f0509a245b8        gcr.io/google_containers/etcd-amd64                      &lt;span class="s2"&gt;&amp;quot;etcd --listen-cli...&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_etcd_etcd-k8s_kube-system_9ef6d25e21bb4befeabe4d0e4f72d1ca_0
e3858cbeff18        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-scheduler-k8s_kube-system_2b08b8f69c973df2fbf99ddef86b56ef_0
ddd174443dc7        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-controller-manager-k8s_kube-system_c0244259dda50419552580ddd0c049f3_0
430e89f47f1d        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_kube-apiserver-k8s_kube-system_f3d9d19161b9f95170a67c2834ba1c8b_0
b3134e793b2c        gcr.io/google_containers/pause-amd64:3.0                 &lt;span class="s2"&gt;&amp;quot;/pause&amp;quot;&lt;/span&gt;                 &lt;span class="m"&gt;24&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;24&lt;/span&gt; hours                             k8s_POD_etcd-k8s_kube-system_9ef6d25e21bb4befeabe4d0e4f72d1ca_0
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;node&lt;/h1&gt;
&lt;p&gt;加入集群&lt;/p&gt;
&lt;p&gt;使用初始化集群时提示的命令加入集群&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubeadm join --token 2af779.b803df0b1effb3d9 &lt;span class="m"&gt;192&lt;/span&gt;.168.25.148:6443
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>给Spacemacs添加中文字体</title><link href="/gei-spacemacstian-jia-zhong-wen-zi-ti.html" rel="alternate"></link><published>2017-03-01T14:37:46+08:00</published><updated>2017-03-01T14:37:46+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2017-03-01:/gei-spacemacstian-jia-zhong-wen-zi-ti.html</id><content type="html">&lt;p&gt;不知道为什么Spacemacs突然不显示中文了，必须得设置一个中文字体才可以，但是中文字体的西文都烂的可以，所以想能不能给中文单独设置一个字体，结果找到了以下方法。
将以下代码添加到 &lt;code&gt;dotspacemacs/user-config&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dolist&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;charset&lt;/span&gt; &lt;span class="o"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;kana&lt;/span&gt; &lt;span class="nv"&gt;han&lt;/span&gt; &lt;span class="nv"&gt;cjk-misc&lt;/span&gt; &lt;span class="nv"&gt;bopomofo&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;set-fontset-font&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;frame-parameter&lt;/span&gt; &lt;span class="no"&gt;nil&lt;/span&gt; &lt;span class="ss"&gt;&amp;#39;font&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;charset&lt;/span&gt;
                    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;font-spec&lt;/span&gt; &lt;span class="ss"&gt;:family&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sans Mono CJK SC&amp;quot;&lt;/span&gt; &lt;span class="ss"&gt;:size&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>"使用Spacemacs管理hexo"</title><link href="/shi-yong-spacemacsguan-li-hexo.html" rel="alternate"></link><published>2016-12-27T11:56:08+08:00</published><updated>2016-12-27T11:56:08+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-12-27:/shi-yong-spacemacsguan-li-hexo.html</id><content type="html">&lt;h1&gt;安装&lt;/h1&gt;
&lt;p&gt;在private layer － package.el 中添加&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;hexo&lt;/span&gt; &lt;span class="ss"&gt;:location&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;recipe&lt;/span&gt;
                    &lt;span class="ss"&gt;:fetcher&lt;/span&gt; &lt;span class="nv"&gt;github&lt;/span&gt;
                    &lt;span class="ss"&gt;:repo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;kuanyui/hexo.el&amp;quot;&lt;/span&gt;
                    &lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;melpa 中的版本好像有问题，需要使用github中的版本&lt;/p&gt;
&lt;p&gt;在private layer - func.el 中添加&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;defun&lt;/span&gt; &lt;span class="nv"&gt;hexo-my-blog&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;interactive&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;hexo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;~/my-blog/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Usage&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;M-x hexo&lt;/code&gt; 可以进入 &lt;code&gt;hexo—mode&lt;/code&gt;&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>忘记RHEL7 root密码的找回办法</title><link href="/wang-ji-rhel7-rootmi-ma-de-zhao-hui-ban-fa.html" rel="alternate"></link><published>2016-12-16T13:46:02+08:00</published><updated>2016-12-16T13:46:02+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-12-16:/wang-ji-rhel7-rootmi-ma-de-zhao-hui-ban-fa.html</id><content type="html">&lt;p&gt;RHEL7引导时采用grub2，与以前的RHEL版本采用grub1，在引导时差别较大。
进行单用户模式的方式也有一定差异。&lt;/p&gt;
&lt;p&gt;在RHEL7中，进入单用户模式的方法如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;1. 开机到grub2时，用上下键移到用上下键移到菜单中所要使用的启动项，按e（注意不是回车）&lt;/span&gt;
&lt;span class="err"&gt;2. 在&amp;quot;linux16 /vmlinuz-3.10.0 ...&amp;quot;这一行的最后面加入&amp;quot;rw single init=/bin/bash&amp;quot;,然后按Ctl+X或F10, 就可以进入 单用户模式，进去干什么都行了。可以改普通用户密码，也可以改root密码。&lt;/span&gt;
&lt;span class="err"&gt;3. 输入Ctl+Alt+Del重启。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>Windows查看端口占用</title><link href="/windowscha-kan-duan-kou-zhan-yong.html" rel="alternate"></link><published>2016-12-16T13:33:42+08:00</published><updated>2016-12-16T13:33:42+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-12-16:/windowscha-kan-duan-kou-zhan-yong.html</id><summary type="html">&lt;p&gt;假如我们需要确定谁占用了我们的9050端口&lt;/p&gt;
&lt;h1&gt;查看所有的端口占用情况&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ano&lt;/span&gt;

  &lt;span class="err"&gt;协议&lt;/span&gt;    &lt;span class="err"&gt;本地地址&lt;/span&gt;                     &lt;span class="err"&gt;外部地址&lt;/span&gt;               &lt;span class="err"&gt;状态&lt;/span&gt;                   &lt;span class="n"&gt;PID&lt;/span&gt;

  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1434&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;3236&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5679&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;4168&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;7438&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;4168&lt;/span&gt;
  &lt;span class="n"&gt;TCP …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;假如我们需要确定谁占用了我们的9050端口&lt;/p&gt;
&lt;h1&gt;查看所有的端口占用情况&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ano&lt;/span&gt;

  &lt;span class="err"&gt;协议&lt;/span&gt;    &lt;span class="err"&gt;本地地址&lt;/span&gt;                     &lt;span class="err"&gt;外部地址&lt;/span&gt;               &lt;span class="err"&gt;状态&lt;/span&gt;                   &lt;span class="n"&gt;PID&lt;/span&gt;

  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1434&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;3236&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5679&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;4168&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;7438&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;4168&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8015&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;1456&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;139&lt;/span&gt;      &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1957&lt;/span&gt;     &lt;span class="mi"&gt;220&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;181&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;225&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;443&lt;/span&gt;     &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;3068&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2020&lt;/span&gt;     &lt;span class="mi"&gt;183&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;62&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;189&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1522&lt;/span&gt;     &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;1456&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2927&lt;/span&gt;     &lt;span class="mi"&gt;117&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;        &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;4732&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2929&lt;/span&gt;     &lt;span class="mi"&gt;117&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;        &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;4732&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2930&lt;/span&gt;     &lt;span class="mi"&gt;117&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;        &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;4732&lt;/span&gt;
  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2931&lt;/span&gt;     &lt;span class="mi"&gt;117&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;        &lt;span class="n"&gt;ESTABLISHED&lt;/span&gt;     &lt;span class="mi"&gt;4732&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;查看指定端口的占用情况&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;aon&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;findstr&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;9050&amp;quot;&lt;/span&gt;

  &lt;span class="err"&gt;协议&lt;/span&gt;    &lt;span class="err"&gt;本地地址&lt;/span&gt;                     &lt;span class="err"&gt;外部地址&lt;/span&gt;               &lt;span class="err"&gt;状态&lt;/span&gt;                   &lt;span class="n"&gt;PID&lt;/span&gt;

  &lt;span class="n"&gt;TCP&lt;/span&gt;    &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9050&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;              &lt;span class="n"&gt;LISTENING&lt;/span&gt;       &lt;span class="mi"&gt;2016&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;P: 看到了吗，端口被进程号为2016的进程占用，继续执行下面命令： （也可以去任务管理器中查看pid对应的进程）&lt;/p&gt;
&lt;h1&gt;查看PID对应的进程&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tasklist&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;findstr&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;2016&amp;quot;&lt;/span&gt;

 &lt;span class="err"&gt;映像名称&lt;/span&gt;                       &lt;span class="n"&gt;PID&lt;/span&gt; &lt;span class="err"&gt;会话名&lt;/span&gt;              &lt;span class="err"&gt;会话&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;       &lt;span class="err"&gt;内存使用&lt;/span&gt;
 &lt;span class="o"&gt;=========================&lt;/span&gt; &lt;span class="o"&gt;========&lt;/span&gt; &lt;span class="o"&gt;================&lt;/span&gt;
  &lt;span class="n"&gt;tor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;                     &lt;span class="mi"&gt;2016&lt;/span&gt; &lt;span class="n"&gt;Console&lt;/span&gt;                 &lt;span class="mi"&gt;0&lt;/span&gt;     &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;064&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;P:很清楚吧，tor占用了你的端口。&lt;/p&gt;
&lt;h1&gt;结束该进程&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;C:\&amp;gt;taskkill /f /t /im tor.exe&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>将hexo项目置与版本控制下</title><link href="/jiang-hexoxiang-mu-zhi-yu-ban-ben-kong-zhi-xia.html" rel="alternate"></link><published>2016-10-16T17:29:29+08:00</published><updated>2016-10-16T17:29:29+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-10-16:/jiang-hexoxiang-mu-zhi-yu-ban-ben-kong-zhi-xia.html</id><summary type="html">&lt;p&gt;[转自]&lt;a href="http://www.iamsuperman.cn/2016/02/22/hexo/hexo-guide-3/"&gt;Hexo 博客搭建教程（三）：Hexo 博客代码版本控制&lt;/a&gt;
由于 Hexo 只会将生成后的 public 文件夹部署到 github 上，导致无法对博客进行代码版本控制。同时如果需要备份代码的话，只能通过其他手段来实现。
本文介绍了如何利用 github 分支对代码进行版本控制，同时起到备份代码的作用。&lt;/p&gt;
&lt;p&gt;解决思路
实现 Hexo 博客代码版本控制以及备份的思路如下：
通过新建一个source分支用于专门存放 hexo 代码。原先的master分支依然不变，作为 hexo 部署的分支。
每次在部署后，再把代码提交到source分支。&lt;/p&gt;
&lt;p&gt;1、本地创建 git 仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git init
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2、添加远程库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git remote add origin &amp;lt;git repository url&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3、创建 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;[转自]&lt;a href="http://www.iamsuperman.cn/2016/02/22/hexo/hexo-guide-3/"&gt;Hexo 博客搭建教程（三）：Hexo 博客代码版本控制&lt;/a&gt;
由于 Hexo 只会将生成后的 public 文件夹部署到 github 上，导致无法对博客进行代码版本控制。同时如果需要备份代码的话，只能通过其他手段来实现。
本文介绍了如何利用 github 分支对代码进行版本控制，同时起到备份代码的作用。&lt;/p&gt;
&lt;p&gt;解决思路
实现 Hexo 博客代码版本控制以及备份的思路如下：
通过新建一个source分支用于专门存放 hexo 代码。原先的master分支依然不变，作为 hexo 部署的分支。
每次在部署后，再把代码提交到source分支。&lt;/p&gt;
&lt;p&gt;1、本地创建 git 仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git init
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2、添加远程库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git remote add origin &amp;lt;git repository url&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3、创建 source 分支&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git checkout -b &lt;span class="nb"&gt;source&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4、提交文件及分支，并 push 到远程仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git add *
git commit -m &lt;span class="s1"&gt;&amp;#39;message&amp;#39;&lt;/span&gt;
git push origin &lt;span class="nb"&gt;source&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其中source为分支名称。&lt;/p&gt;
&lt;p&gt;这样就建立了代码版本控制分支。之后只要将博客在部署到 github 之后，将代码 push 到source分支上。代码如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git add *
git commit -m &lt;span class="s2"&gt;&amp;quot;udpate site&amp;quot;&lt;/span&gt;
git push origin &lt;span class="nb"&gt;source&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;问题记录
如果你使用了第三方主题，在进行代码提交的时候，是无法将第三方主题提交到你的 github repository 中，会出现 untracked content的提示。
这是因为第三方主题本身也是一个 git 项目。你无法将别人的 git 项目直接通过 add 和 commit 的方式提交到你自己的 git repository。
也就说，你无法提交处于 untracked状态的文件。
解决办法：&lt;/p&gt;
&lt;p&gt;添加 submodule的方式，将主题作为 submodule 提交到你的 git repository
删除主题文件夹下的.git文件夹。如果这时候还不能提交，可以新建个文件夹，随便命名，将主题文件夹内的东西复制到新建的文件夹。再通过git add提交就可以了。&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>Android消除叹号</title><link href="/androidxiao-chu-tan-hao.html" rel="alternate"></link><published>2016-10-14T18:03:00+08:00</published><updated>2016-10-14T18:03:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-10-14:/androidxiao-chu-tan-hao.html</id><content type="html">&lt;p&gt;更新
Android 7 开始地址变了，使用以下命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;adb shell &lt;span class="s2"&gt;&amp;quot;settings put global captive_portal_https_url https://www.noisyfox.cn/generate_204&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用adb将/generate204地址设置一下就可以了，可以使用如下命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;adb shell &lt;span class="s2"&gt;&amp;quot;settings put global captive_portal_server captive.v2ex.co&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>Arch使用ApricityOS主题</title><link href="/archshi-yong-apricityoszhu-ti.html" rel="alternate"></link><published>2016-06-13T00:00:00+08:00</published><updated>2016-06-13T00:00:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-06-13:/archshi-yong-apricityoszhu-ti.html</id><content type="html">&lt;h2&gt;安装 ApricityOS 源&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wget http://apricityos.com/apricity-core-signed/apricity-icons-1.0.0-1-any.pkg.tar.xz
yaourt -U apricity-icons-1.0.0-1-any.pkg.tar.xz
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;编辑 &lt;code&gt;/etc/pacman.conf&lt;/code&gt; 文件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[apricity-core]&lt;/span&gt;
&lt;span class="na"&gt;SigLevel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;Required&lt;/span&gt;
&lt;span class="na"&gt;Server&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;http://apricityos.com/apricity-core-signed/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;更新源数据库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yaourt -Syu
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装主题&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yaourt -S apricity-themes-gnome apricity-icons apricity-keyring apricity-wallpapers
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>用 Sphinx 制作中文 pdf</title><link href="/yong-sphinx-zhi-zuo-zhong-wen-pdf.html" rel="alternate"></link><published>2016-05-30T00:00:00+08:00</published><updated>2016-05-30T00:00:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-05-30:/yong-sphinx-zhi-zuo-zhong-wen-pdf.html</id><summary type="html">&lt;p&gt;[转自] &lt;a href="https://guts.me/2013/06/21/generate-pdf-containing-chinese-with-sphinx/"&gt;用 Sphinx 制作中文 pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近一直在玩些少众的东西，感觉都是很棒的东西，可惜关于它们的资源比较少，中文的就更少，所以打算翻译其中一些觉得比较好的文档。&lt;/p&gt;
&lt;p&gt;其中有些文档是用 Sphinx 制作的，有了文档的源码，翻译好再用 Sphinx 再次生成中文版的就可以。然而在生成 pdf 文档的过程却遇到很多问题。虽然 Sphinx 是用 Python 写的，Python 对 UTF8 编码的支持毋庸置疑，但生成 pdf 的过程是由 LaTeX 套件完成。问题在于 LaTeX 套件从开发之日起就没有考虑过支持如中文这样使用 Unicode 字符的语言。&lt;/p&gt;
&lt;p&gt;google 了很久，经过了很多尝试，也在 stackoverflow.com 上问了一些高手，最终得到两个能够要达到这个目的方案。两个方案的效果都不太完美，不过还算差强人意了。&lt;/p&gt;
&lt;p&gt;在 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;[转自] &lt;a href="https://guts.me/2013/06/21/generate-pdf-containing-chinese-with-sphinx/"&gt;用 Sphinx 制作中文 pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近一直在玩些少众的东西，感觉都是很棒的东西，可惜关于它们的资源比较少，中文的就更少，所以打算翻译其中一些觉得比较好的文档。&lt;/p&gt;
&lt;p&gt;其中有些文档是用 Sphinx 制作的，有了文档的源码，翻译好再用 Sphinx 再次生成中文版的就可以。然而在生成 pdf 文档的过程却遇到很多问题。虽然 Sphinx 是用 Python 写的，Python 对 UTF8 编码的支持毋庸置疑，但生成 pdf 的过程是由 LaTeX 套件完成。问题在于 LaTeX 套件从开发之日起就没有考虑过支持如中文这样使用 Unicode 字符的语言。&lt;/p&gt;
&lt;p&gt;google 了很久，经过了很多尝试，也在 stackoverflow.com 上问了一些高手，最终得到两个能够要达到这个目的方案。两个方案的效果都不太完美，不过还算差强人意了。&lt;/p&gt;
&lt;p&gt;在 Arch Linux 上需要安装的软件包有：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S make python-sphinx texlive-langextra texlive-langcjk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装时使用默认的选项，其他依赖的软件包也会一同被安装上了。安装完后可以使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;latex -v
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;来查看具体安装到的 LaTeX 套件版本。&lt;/p&gt;
&lt;p&gt;若是 Ubuntu，也需要安装同样的软件包：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install make python-sphinx texlive-full
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;两个方案所述的 pdf 制作方法，不仅适用于中文，也适用于日文和韩文。其实是因为上面安装软件包时选择了 CJK 组件，CJK 就是 Chinese、Japanese、Korean 的缩写&lt;/p&gt;
&lt;h2&gt;方案1、使用 LaTeX 及 CJK 自带的字体&lt;/h2&gt;
&lt;p&gt;上面安装 LaTeX 套件的时候也安装了 CJK 字体。其中有 4 种中文字体：gbsn(简体宋体)、gkai(简体楷体)、bsmi(繁体明体)和 bkai(繁体楷体)。选择字体的时候一定要简体选简体的字体，繁体选繁体的字体，否则生成的 pdf 文档会出现文字缺失。选择好字体就可以在 conf.py 的 latex_elements 选项中添加相关的配置内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;latex_elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;preamble&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;hypersetup{unicode=true}&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;usepackage&lt;/span&gt;&lt;span class="si"&gt;{CJKutf8}&lt;/span&gt;&lt;span class="s1"&gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;AtBeginDocument{&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;begin&lt;/span&gt;&lt;span class="si"&gt;{CJK}{UTF8}{gbsn}&lt;/span&gt;&lt;span class="s1"&gt;}&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;AtEndDocument{&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;end&lt;/span&gt;&lt;span class="si"&gt;{CJK}&lt;/span&gt;&lt;span class="s1"&gt;}&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其中 &lt;code&gt;\hypersetup&lt;/code&gt; 是用于设置生成的 pdf 的书签使用 Unicode 字符，否则会出现乱码。&lt;/p&gt;
&lt;p&gt;修改完 conf.py 后，就可以执行 Sphinx 项目的 &lt;code&gt;make latexpdf&lt;/code&gt; 命令生成 pdf 文档了。&lt;/p&gt;
&lt;p&gt;如果在 conf.py 的 latex_document 选项中文档标题的内容或作者的内容里包含有 Unicode 字符，可能会出现下面这些莫名其妙的错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
&lt;span class="o"&gt;(&lt;/span&gt;/usr/share/texmf-dist/tex/latex/cjk/texinput/UTF8/UTF8.bdg&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;/usr/share/texmf-dist/tex/latex/cjk/texinput/UTF8/UTF8.enc&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;/usr/share/texmf-dist/tex/latex/cjk/texinput/UTF8/UTF8.chr&lt;span class="o"&gt;)&lt;/span&gt;
! Extra &lt;span class="se"&gt;\e&lt;/span&gt;lse.
&lt;span class="se"&gt;\C&lt;/span&gt;JK@XXX ...&lt;span class="se"&gt;\n&lt;/span&gt;umber &lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="c1"&gt;#1\endcsname {`#2}{`#3}\else&lt;/span&gt;
                                              &lt;span class="se"&gt;\c&lt;/span&gt;sname u8:&lt;span class="se"&gt;\s&lt;/span&gt;tring &lt;span class="c1"&gt;#1\stri...&lt;/span&gt;
l.32 &lt;span class="se"&gt;\t&lt;/span&gt;ableofcontents

?
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是由于 Sphinx 在生成 LaTeX 文档时会用 CJK 字符直接替换掉相应的占位符。而 CJK 字符本身就是宏，不应该直接写入 pdf 流中。因为不想修改 Sphinx 的文档类文件 sphinxmanual.cls，所以采取一个投机取巧的方法来处理。用 \unexpanded 将 Unicode 字符括起来：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;latex_documents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;index&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;AnIntroductiontolibuv.tex&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sa"&gt;u&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;unexpanded&lt;/span&gt;&lt;span class="si"&gt;{中文内容}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;u&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;unexpanded&lt;/span&gt;&lt;span class="si"&gt;{中文作者}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;manual&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;方案2、使用 ReTeX 及系统字体&lt;/h2&gt;
&lt;p&gt;ReTeX 是专门为生成 Unicode pdf 文档而生 LaTeX 组件，使用上与 LaTeX 差不多。区别是 XeTeX 使用的是系统已安装的字体，这可以解决 LaTeX 字体缺乏的问题。但在测试过程中，只在 Ubuntu 上成功生成 pdf 文档，在 Arch Linux 上则出现错误。google 了一下原因大概是 XeCJK 与新版的 LaTeX 不兼容。&lt;/p&gt;
&lt;p&gt;使用 ReTeX 的第一步也是确定要使用的字体。使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fc-list :lang&lt;span class="o"&gt;=&lt;/span&gt;zh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;来查看系统中已安装的中文字体。&lt;/p&gt;
&lt;p&gt;选择好字体后，同样需要修改 conf.py 文件中的 latex_elements 选项：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;latex_elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;preamble&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;usepackage&lt;/span&gt;&lt;span class="si"&gt;{xeCJK}&lt;/span&gt;&lt;span class="s1"&gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;usepackage&lt;/span&gt;&lt;span class="si"&gt;{indentfirst}&lt;/span&gt;&lt;span class="s1"&gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;setlength{&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;parindent}&lt;/span&gt;&lt;span class="si"&gt;{2em}&lt;/span&gt;&lt;span class="s1"&gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;setCJKmainfont{WenQuanYi Zen Hei Sharp}&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;setCJKmonofont[Scale=0.9]{WenQuanYi Zen Hei Mono}&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;setCJKfamilyfont&lt;/span&gt;&lt;span class="si"&gt;{song}&lt;/span&gt;&lt;span class="s1"&gt;{WenQuanYi Zen Hei}&lt;/span&gt;
&lt;span class="s1"&gt;    &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;setCJKfamilyfont&lt;/span&gt;&lt;span class="si"&gt;{sf}&lt;/span&gt;&lt;span class="s1"&gt;{WenQuanYi Zen Hei}&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;主要是在 \setCJKmainfont、\setCJKmonofont、\setCJKfamilyfont{song} 和 \setCJKfamilyfont{sf} 最后的大括号里填入想要使用的字体名称，即 fc-list 命令列出的名称。&lt;/p&gt;
&lt;p&gt;而使用 XeTeX 时，conf.py 里的 latex_document 选项中的标题及作者内容不需要用 \unexpanded 括起 Unicode 字符。&lt;/p&gt;
&lt;p&gt;生成 pdf 时，首先执行 Sphinx 项目下的&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;make latex
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;得到需要的 .tex 文件，如 mybook.tex，进入其中的 build/latex 目录中，执行两次下面的命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;xelatex mybook.tex
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;至于为什么要执行两次，在网上能找到的文章都说为了正确生成书签。而我的实验结果是，第一次执行生成的 pdf 文档中没有书签，第二次执行后才生成书签。可能是 XeTeX 具体实现机制的问题吧，不去深究了。&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>Arch GNOME 下配置蓝牙耳机</title><link href="/arch-gnome-xia-pei-zhi-lan-ya-er-ji.html" rel="alternate"></link><published>2016-05-23T00:00:00+08:00</published><updated>2016-05-23T00:00:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2016-05-23:/arch-gnome-xia-pei-zhi-lan-ya-er-ji.html</id><summary type="html">&lt;h2&gt;安装配置&lt;/h2&gt;
&lt;p&gt;首先安装包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pulseaudio-alsa pulseaudio-bluetooth bluez bluez-libs bluez-utils bluez-firmware
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;启动蓝牙进程&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl start bluetooth
systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; bluetooth
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后进入 &lt;code&gt;bluetoothctl&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;power on
agent on
default-agent
scan on
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;耳机在配对模式，很快就能发现设备&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;NEW&lt;span class="o"&gt;]&lt;/span&gt; Device B8:AD:3E:5C:43:6E LG HBS750
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用MAC地址配对&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pair B8:AD:3E:5C:43:6E
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用MAC地址连接&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;connect B8:AD:3E:5C …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2&gt;安装配置&lt;/h2&gt;
&lt;p&gt;首先安装包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pulseaudio-alsa pulseaudio-bluetooth bluez bluez-libs bluez-utils bluez-firmware
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;启动蓝牙进程&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl start bluetooth
systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; bluetooth
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后进入 &lt;code&gt;bluetoothctl&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;power on
agent on
default-agent
scan on
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;耳机在配对模式，很快就能发现设备&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;NEW&lt;span class="o"&gt;]&lt;/span&gt; Device B8:AD:3E:5C:43:6E LG HBS750
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用MAC地址配对&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pair B8:AD:3E:5C:43:6E
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用MAC地址连接&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;connect B8:AD:3E:5C:43:6E
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Troubleshooting&lt;/h2&gt;
&lt;p&gt;配对成功, 但连接失败&lt;/p&gt;
&lt;p&gt;你可能在 bluetoothctl 里面看到下面的错误:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;bluetooth&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="c1"&gt;# connect 00:1D:43:6D:03:26&lt;/span&gt;
Attempting to connect to &lt;span class="m"&gt;00&lt;/span&gt;:1D:43:6D:03:26
Failed to connect: org.bluez.Error.Failed
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是因为没有安装pulseaudio-bluetooth 包导致的。 如果确实没有安装，安装一下这个包，然后重启一下PulseAudio&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>安装Flask的development版本</title><link href="/an-zhuang-flaskde-developmentban-ben.html" rel="alternate"></link><published>2015-06-24T12:42:00+08:00</published><updated>2015-06-24T12:42:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2015-06-24:/an-zhuang-flaskde-developmentban-ben.html</id><content type="html">&lt;p&gt;因为Flask的开发版本提供了flask命令，开发起来比较方便，所以安装开发版本比较好。
安装方法：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install https://github.com/mitsuhiko/flask/tarball/master
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>在Vim中使用CtrlP快速打开文件</title><link href="/zai-vimzhong-shi-yong-ctrlpkuai-su-da-kai-wen-jian.html" rel="alternate"></link><published>2015-06-06T10:20:00+08:00</published><updated>2015-06-06T10:20:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2015-06-06:/zai-vimzhong-shi-yong-ctrlpkuai-su-da-kai-wen-jian.html</id><content type="html">&lt;p&gt;使用vundle安装：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;Plugin &amp;#39;kien/ctrlp.vim&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;设置CtrlP&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;let g:ctrlp_map = &amp;#39;&amp;lt;c-p&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;let g:ctrlp_cmd = &amp;#39;CtrlP&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;let g:ctrlp_working_path_mode = &amp;#39;ra&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>自动挂载U盘</title><link href="/zi-dong-gua-zai-upan.html" rel="alternate"></link><published>2015-06-06T00:00:00+08:00</published><updated>2015-06-06T00:00:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2015-06-06:/zi-dong-gua-zai-upan.html</id><content type="html">&lt;h2&gt;安装&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S udisks
pacman -S udevil
systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; devmon@eailfly.service
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注意：devmon 后的启动参数为用户名。
U盘将被装载到 /media 文件夹。&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>配置Tomcat的访问日志格式化输出</title><link href="/pei-zhi-tomcatde-fang-wen-ri-zhi-ge-shi-hua-shu-chu.html" rel="alternate"></link><published>2014-08-02T13:23:00+08:00</published><updated>2014-08-02T13:23:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2014-08-02:/pei-zhi-tomcatde-fang-wen-ri-zhi-ge-shi-hua-shu-chu.html</id><summary type="html">&lt;p&gt;在tomcat的server.xml文件中，Host主机配置区域找到类似如下(Value标签元素)即为访问日志的配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;Host&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt;  &lt;span class="na"&gt;appBase=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;webapps&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;unpackWARs=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;autoDeploy=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="c"&gt;&amp;lt;!--...部分内容略..--&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;Valve&lt;/span&gt; &lt;span class="na"&gt;className=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.apache.catalina.valves.AccessLogValve&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;directory=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;logs&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;prefix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;localhost_access_log.&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;suffix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.txt&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;pattern=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%h %l %u %t &amp;amp;quot;%r&amp;amp;quot; %s %b&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class="nt"&gt;&amp;lt;/Host&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其中的directory用于指定日志的存放路径，默认位于tomcat的logs目录中，例如我们可以修改成：&lt;code&gt;directory="/var/log/tomcat"&lt;/code&gt; 使日志放到/var/log/tomcat目录中去 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;在tomcat的server.xml文件中，Host主机配置区域找到类似如下(Value标签元素)即为访问日志的配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;Host&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt;  &lt;span class="na"&gt;appBase=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;webapps&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;unpackWARs=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;autoDeploy=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="c"&gt;&amp;lt;!--...部分内容略..--&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;Valve&lt;/span&gt; &lt;span class="na"&gt;className=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.apache.catalina.valves.AccessLogValve&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;directory=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;logs&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;prefix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;localhost_access_log.&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;suffix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.txt&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;pattern=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%h %l %u %t &amp;amp;quot;%r&amp;amp;quot; %s %b&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class="nt"&gt;&amp;lt;/Host&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其中的directory用于指定日志的存放路径，默认位于tomcat的logs目录中，例如我们可以修改成：&lt;code&gt;directory="/var/log/tomcat"&lt;/code&gt; 使日志放到/var/log/tomcat目录中去。
其中的prefix和suffic分别用于指定日志文件的前缀和后缀，不用我多说。
现在我们主要来看一下pattern配置段，它用于指定日志的输出格式。有效的日志格式模式可以参见下面内容，如下字符串，其对应的信息由指定的响应内容取代：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;％a - 远程IP地址％A - 本地IP地址
％b - 发送的字节数，不包括HTTP头，或“ - ”如果没有发送字节
％B - 发送的字节数，不包括HTTP头
％h - 远程主机名
％H - 请求协议
％l &lt;span class="o"&gt;(&lt;/span&gt;小写的L&lt;span class="o"&gt;)&lt;/span&gt;- 远程逻辑从identd的用户名（总是返回&lt;span class="s1"&gt;&amp;#39; - &amp;#39;&lt;/span&gt;）
％m - 请求方法
％p - 本地端口
％q - 查询字符串（在前面加上一个“？”如果它存在，否则是一个空字符串
％r - 第一行的要求
％s - 响应的HTTP状态代码
％S - 用户会话ID
％t - 日期和时间，在通用日志格式
％u - 远程用户身份验证
％U - 请求的URL路径
％v - 本地服务器名
％D - 处理请求的时间（以毫秒为单位）
％T - 处理请求的时间（以秒为单位）
％I （大写的i） - 当前请求的线程名称
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;此外，您可以指定以下别名来设置为普遍使用的模式之一：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;common - %h %l %u %t &lt;span class="s2"&gt;&amp;quot;%r&amp;quot;&lt;/span&gt; %s %b
combined - %h %l %u %t &lt;span class="s2"&gt;&amp;quot;%r&amp;quot;&lt;/span&gt; %s %b &lt;span class="s2"&gt;&amp;quot;%{Referer}i&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%{User-Agent}i&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;另外，还可以将request请求的查询参数、session会话变量值、cookie值或HTTP请求/响应头内容的变量值等内容写入到日志文件。
它仿照了apache的语法：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;％&lt;span class="o"&gt;{&lt;/span&gt;XXX&lt;span class="o"&gt;}&lt;/span&gt;i xxx代表传入的头&lt;span class="o"&gt;(&lt;/span&gt;HTTP Request&lt;span class="o"&gt;)&lt;/span&gt;
％&lt;span class="o"&gt;{&lt;/span&gt;XXX&lt;span class="o"&gt;}&lt;/span&gt;o xxx代表传出的响应头&lt;span class="o"&gt;(&lt;/span&gt;Http Resonse&lt;span class="o"&gt;)&lt;/span&gt;
％&lt;span class="o"&gt;{&lt;/span&gt;XXX&lt;span class="o"&gt;}&lt;/span&gt;c xxx代表特定的Cookie名
％&lt;span class="o"&gt;{&lt;/span&gt;XXX&lt;span class="o"&gt;}&lt;/span&gt;r xxx代表ServletRequest属性名
％&lt;span class="o"&gt;{&lt;/span&gt;XXX&lt;span class="o"&gt;}&lt;/span&gt;s xxx代表HttpSession中的属性名
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;举例说明：
例如我们在架设jsp服务器时，采用Nginx+Tomcat这种配置时，将请求由Nginx转发给Tomcat，当需要在tomcat的日志中记录来访者的真实IP地址信息时，我们就需要做一点点有别于其它的特殊匹配了，要不然tomcat记录的访客IP全都是127.0.0.1, 这是因为所有的请求都是由Nginx前端服务器转发而来的，而前端服务器对于tomcat来说就是127.0.0.1。&lt;/p&gt;
&lt;p&gt;下面，我们来看一下如何让tomcat记录用户的真实IP地址：
一、配置Nginx转发IP头：
在Nginx的server主机配置段中添加：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;proxy_set_header      Host &lt;span class="nv"&gt;$host&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
proxy_set_header      X-Real-IP &lt;span class="nv"&gt;$remote_addr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;说明：上面两行用于向tomcat发送真实的远端主机名和IP地址。其中的Host代表主机名， X-Real-IP代表主机IP，对于HTTP头部内容，这些变量是不区分大小写的。&lt;/p&gt;
&lt;p&gt;二、配置Tomcat日志记录客户真实IP：
在Tomcat中要记录来访者真实IP，大家参考上面所述的tomcat日志配置语法，只需在日志模式中添加如下模式就行了：%{X-Real-IP}i
如下面完整的Tomcat日志配置段：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;Valve&lt;/span&gt; &lt;span class="na"&gt;className=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.apache.catalina.valves.AccessLogValve&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;directory=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;c:/wwwlogs/&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;prefix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cluster.&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;suffix=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.log&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;pattern=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%{X-Real-IP}i %u %t %r %s %b&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;resolveHosts=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;false&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注意：上两两处修改后，您应该重新启动Nginx和Tomcat服务，以使您的修改生效。这样，当有新的请求过来时，便可以在Tomcat日志文件中记录访客的真实IP地址了。&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>使用alternatives管理多版本软件</title><link href="/shi-yong-alternativesguan-li-duo-ban-ben-ruan-jian.html" rel="alternate"></link><published>2014-03-09T00:00:00+08:00</published><updated>2014-03-09T00:00:00+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2014-03-09:/shi-yong-alternativesguan-li-duo-ban-ben-ruan-jian.html</id><summary type="html">&lt;p&gt;今天装you-get的时候发现需要python3，安装python3的时候发现了python的路径是这样的&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; ll /usr/bin/python
lrwxrwxrwx &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;24&lt;/span&gt; 3月   &lt;span class="m"&gt;9&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;:28 /usr/bin/python -&amp;gt; /etc/alternatives/python
&amp;gt; ll /etc/alternatives/python
lrwxrwxrwx &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;18&lt;/span&gt; 3月   &lt;span class="m"&gt;9&lt;/span&gt; &lt;span class="m"&gt;15&lt;/span&gt;:25 /etc/alternatives/python -&amp;gt; /usr/bin/python2.7
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;不知道为什么linux要这样处理，好像以前也碰到过这个现象，但是当时都是直接做的链接，这次google了一下才知道这是一个多版本软件管理的工具。&lt;/p&gt;
&lt;p&gt;将python2和python3注册到alternatives中&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; update-alternatives --install /usr/bin …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;今天装you-get的时候发现需要python3，安装python3的时候发现了python的路径是这样的&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; ll /usr/bin/python
lrwxrwxrwx &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;24&lt;/span&gt; 3月   &lt;span class="m"&gt;9&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;:28 /usr/bin/python -&amp;gt; /etc/alternatives/python
&amp;gt; ll /etc/alternatives/python
lrwxrwxrwx &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;18&lt;/span&gt; 3月   &lt;span class="m"&gt;9&lt;/span&gt; &lt;span class="m"&gt;15&lt;/span&gt;:25 /etc/alternatives/python -&amp;gt; /usr/bin/python2.7
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;不知道为什么linux要这样处理，好像以前也碰到过这个现象，但是当时都是直接做的链接，这次google了一下才知道这是一个多版本软件管理的工具。&lt;/p&gt;
&lt;p&gt;将python2和python3注册到alternatives中&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; update-alternatives --install /usr/bin/python python /usr/bin/python2.7 &lt;span class="m"&gt;100&lt;/span&gt;
&amp;gt; update-alternatives --install /usr/bin/python python /usr/bin/python3.3 &lt;span class="m"&gt;101&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后看看注册结果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; sudo update-alternatives --config python
There are &lt;span class="m"&gt;2&lt;/span&gt; choices &lt;span class="k"&gt;for&lt;/span&gt; the alternative python &lt;span class="o"&gt;(&lt;/span&gt;providing /usr/bin/python&lt;span class="o"&gt;)&lt;/span&gt;.

Selection    Path                Priority   Status
&lt;span class="m"&gt;0&lt;/span&gt;            /usr/bin/python3.3   &lt;span class="m"&gt;6&lt;/span&gt;         auto mode
* &lt;span class="m"&gt;1&lt;/span&gt;            /usr/bin/python2.7   &lt;span class="m"&gt;5&lt;/span&gt;         manual mode
&lt;span class="m"&gt;2&lt;/span&gt;            /usr/bin/python3.3   &lt;span class="m"&gt;6&lt;/span&gt;         manual mode

Press enter to keep the current choice&lt;span class="o"&gt;[&lt;/span&gt;*&lt;span class="o"&gt;]&lt;/span&gt;, or &lt;span class="nb"&gt;type&lt;/span&gt; selection number:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里输入你要的版本的序号就可以了。&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>readline快捷键</title><link href="/readlinekuai-jie-jian.html" rel="alternate"></link><published>2013-11-29T17:09:31+08:00</published><updated>2013-11-29T17:09:31+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2013-11-29:/readlinekuai-jie-jian.html</id><content type="html">&lt;h2&gt;移动光标&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Ctrl-b 向左移动一个字符
    Ctrl-f 向右移动一个字符
    Alt-b  向左移动一个单词
    Alt-f  向右移动一个单词
    Ctrl-a 移动到一行的起始
    Ctrl-e 移动到一行的结尾
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;删除内容&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Ctrl-u 删除光标左边的所有内容
    Ctrl-k 删除光标右边的所有内容
    Ctrl-w 删除光标前面一个单词
    Alt-d 删除光标后面一个单词
    Ctrl-y 粘贴上次被Ctrl-w删除的单词（这个得配合使用&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;撤销操作&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Ctrl-_　撤销上一次操作
    Alt-r 撤销所
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;历史记录&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Ctrl-p    向上翻
    Ctrl-n    向下翻
    Ctrl-r　向后搜索命令行
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>Vim分屏操作</title><link href="/vimfen-ping-cao-zuo.html" rel="alternate"></link><published>2013-11-18T17:03:22+08:00</published><updated>2013-11-18T17:03:22+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2013-11-18:/vimfen-ping-cao-zuo.html</id><summary type="html">&lt;p&gt;本文摘自&lt;a href="http://coolshell.cn/articles/1679.html"&gt;酷壳&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;分屏启动Vim&lt;/h3&gt;
&lt;p&gt;1.用大写O垂直分屏&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim -On file1 file2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.用小写o水平分屏&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim -on file1 file2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注：n表示分几屏&lt;/p&gt;
&lt;h3&gt;关闭分屏&lt;/h3&gt;
&lt;p&gt;1.关闭当前窗口&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+w c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.关闭当前窗口，如果只剩最后一个了，则退出Vim。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+w q
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;分屏&lt;/h3&gt;
&lt;p&gt;1.上下分割当前打开的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.上下分割，并打开一个新的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:sp filename
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.左右分割当前打开的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W v
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4.左右分割，并打开一个新的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:vsp …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;本文摘自&lt;a href="http://coolshell.cn/articles/1679.html"&gt;酷壳&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;分屏启动Vim&lt;/h3&gt;
&lt;p&gt;1.用大写O垂直分屏&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim -On file1 file2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.用小写o水平分屏&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim -on file1 file2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注：n表示分几屏&lt;/p&gt;
&lt;h3&gt;关闭分屏&lt;/h3&gt;
&lt;p&gt;1.关闭当前窗口&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+w c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.关闭当前窗口，如果只剩最后一个了，则退出Vim。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+w q
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;分屏&lt;/h3&gt;
&lt;p&gt;1.上下分割当前打开的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.上下分割，并打开一个新的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:sp filename
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.左右分割当前打开的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W v
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4.左右分割，并打开一个新的文件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:vsp filename
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;移动光标&lt;/h3&gt;
&lt;p&gt;Vi中的光标键是h, j, k, l，要在各个屏间切换，只需要先按一下Ctrl+W&lt;/p&gt;
&lt;p&gt;1.把光标移到右边的屏。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W l
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.把光标移到左边的屏中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W h
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.把光标移到上边的屏中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W k
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4.把光标移到下边的屏中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W j
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;5.把光标移到下一个的屏中。.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W w
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;移动分屏&lt;/h3&gt;
&lt;p&gt;这个功能还是使用了Vim的光标键，只不过都是大写。当然了，如果你的分屏很乱很复杂的话，这个功能可能会出现一些非常奇怪的症状。&lt;/p&gt;
&lt;p&gt;1.向右移动。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W L
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.向左移动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W H
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.向上移动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W K
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4.向下移动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W J
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;屏幕尺寸&lt;/h3&gt;
&lt;p&gt;下面是改变尺寸的一些操作，主要是高度，对于宽度你可以使用Ctrl+W &amp;lt;或是&amp;gt;，但这可能需要最新的版本才支持。&lt;/p&gt;
&lt;p&gt;1.让所有的屏都有一样的高度。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W &lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.增加高度。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W +
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.减少高度。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Ctrl+W -
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>vbox 命令行</title><link href="/vbox-ming-ling-xing.html" rel="alternate"></link><published>2013-11-03T16:49:23+08:00</published><updated>2013-11-03T16:49:23+08:00</updated><author><name>EaiLFly</name></author><id>tag:None,2013-11-03:/vbox-ming-ling-xing.html</id><summary type="html">&lt;h2&gt;创建虚拟机&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage createvm –name &lt;span class="s2"&gt;&amp;quot;openSUSE&amp;quot;&lt;/span&gt; –register
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;创建一个名为openSUSE的虚拟机&lt;/p&gt;
&lt;h2&gt;查看虚拟机&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBxoManage list vms
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看虚拟机状态&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage showvminfo suse
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改虚拟机设置&lt;/h2&gt;
&lt;h3&gt;创建磁盘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage createhd --filename /home/virtualbox/suse.vdi --size &lt;span class="m"&gt;8000&lt;/span&gt; --remember
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;修改操作系统类型&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage modifyvm &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; --ostype &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;设置内存以及显存大小&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage modifyvm &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; --memory &lt;span class="s2"&gt;&amp;quot;1024&amp;quot;&lt;/span&gt; --vram &lt;span class="s2"&gt;&amp;quot;64&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;添加一个IDE接口 (SATA之类的也可以)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage storagectl winxp --name &lt;span class="s2"&gt;&amp;quot;IDE Controller&amp;quot;&lt;/span&gt; --add …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2&gt;创建虚拟机&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage createvm –name &lt;span class="s2"&gt;&amp;quot;openSUSE&amp;quot;&lt;/span&gt; –register
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;创建一个名为openSUSE的虚拟机&lt;/p&gt;
&lt;h2&gt;查看虚拟机&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBxoManage list vms
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看虚拟机状态&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage showvminfo suse
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改虚拟机设置&lt;/h2&gt;
&lt;h3&gt;创建磁盘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage createhd --filename /home/virtualbox/suse.vdi --size &lt;span class="m"&gt;8000&lt;/span&gt; --remember
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;修改操作系统类型&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage modifyvm &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; --ostype &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;设置内存以及显存大小&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage modifyvm &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; --memory &lt;span class="s2"&gt;&amp;quot;1024&amp;quot;&lt;/span&gt; --vram &lt;span class="s2"&gt;&amp;quot;64&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;添加一个IDE接口 (SATA之类的也可以)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage storagectl winxp --name &lt;span class="s2"&gt;&amp;quot;IDE Controller&amp;quot;&lt;/span&gt; --add ide
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;设置启动顺序及挂载一个磁盘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage modifyvm &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; --boot1 dvd --hda &lt;span class="s2"&gt;&amp;quot;/home/virtualbox/suse.vdi&amp;quot;&lt;/span&gt; --sata on
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;把磁盘放在设备0的第0个端口&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage storageattach winxp --storagectl &lt;span class="s2"&gt;&amp;quot;IDE Controller&amp;quot;&lt;/span&gt; --port &lt;span class="m"&gt;0&lt;/span&gt; --device &lt;span class="m"&gt;0&lt;/span&gt; --type hdd --medium /home/virtualbox/suse.vdi
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;挂载ISO&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage storageattach winxp --storagectl &lt;span class="s2"&gt;&amp;quot;IDE Controller&amp;quot;&lt;/span&gt; --port &lt;span class="m"&gt;1&lt;/span&gt; --device &lt;span class="m"&gt;0&lt;/span&gt; --type dvddrive --medium /home/virtualbox/suse.iso
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;启动系统&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;startvm &amp;lt;name&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;--type gui&lt;span class="p"&gt;|&lt;/span&gt;sdl&lt;span class="p"&gt;|&lt;/span&gt;headless&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;三种模式，gui不用说了，sdl这个没装qt环境的时候用，跟gui差不多，headless这个是不用图形界面（这个是最爽的）&lt;/p&gt;
&lt;h2&gt;共享剪切板&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;modifyvm &amp;lt;name&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;--clipboard disabled&lt;span class="p"&gt;|&lt;/span&gt;hosttoguest&lt;span class="p"&gt;|&lt;/span&gt;guesttohost&lt;span class="p"&gt;|&lt;/span&gt;bidirectional&lt;span class="o"&gt;]&lt;/span&gt;

disabled 不共享剪贴板
hosttoguest 将宿主机的剪贴板共享给虚拟机
guesttohost 将虚拟机的剪贴板共享给宿主机
bidirectional 宿主机和虚拟机共使用一个剪贴板
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;共享文件夹&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage sharedfolder add &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;shared&amp;quot;&lt;/span&gt; -hostpath &lt;span class="s2"&gt;&amp;quot;/home/xxx/shared&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;进入系统后&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mount -t vboxsf share mount_point
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;删除共享（虚拟机关闭状态）&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage sharedfolder remove &lt;span class="s2"&gt;&amp;quot;suse&amp;quot;&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;shared&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;虚拟机控制&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxManage controlvm &amp;lt;name&amp;gt; pause&lt;span class="p"&gt;|&lt;/span&gt;resume&lt;span class="p"&gt;|&lt;/span&gt;reset&lt;span class="p"&gt;|&lt;/span&gt;poweroff&lt;span class="p"&gt;|&lt;/span&gt;savestate&lt;span class="p"&gt;|&lt;/span&gt;

pause 暂停，这时虚拟机窗口显示灰色
resume 恢复暂停的虚拟机
reset 复位
poweroff 强行关闭
acpipowerbutton 关机
acpisleepbutton 使虚拟机处于睡眠状态
savestate 保存状态然后关闭，相当于休眠
&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry></feed>